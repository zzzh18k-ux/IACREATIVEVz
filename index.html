<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Social Feed</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <style>
        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding-bottom: 80px;
            color: #1c1e21;
            overscroll-behavior-y: none; /* Evita rebote en scroll */
        }

        /* HEADER FIJO */
        .header {
            background: white;
            padding: 10px 15px;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 50px;
        }
        .logo { font-weight: 900; color: #1877f2; font-size: 22px; letter-spacing: -0.5px; }
        .coins-badge {
            background: #e7f3ff;
            color: #1877f2;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* FEED */
        #feed-container { max-width: 600px; margin: 0 auto; padding-top: 10px; }

        /* ESTILO POST */
        .post-card {
            background: white;
            margin-bottom: 12px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        .post-header {
            padding: 12px;
            display: flex;
            align-items: center;
        }
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
        }
        .user-info { display: flex; flex-direction: column; }
        .username { font-weight: 600; font-size: 15px; }
        .time { font-size: 12px; color: #65676b; }
        
        .post-caption {
            padding: 0 12px 10px 12px;
            font-size: 14px;
            line-height: 1.4;
        }

        .post-media {
            width: 100%;
            height: auto;
            display: block;
            min-height: 250px;
            background: #eee;
            object-fit: cover;
        }

        .post-actions {
            padding: 10px;
            border-top: 1px solid #f0f2f5;
            display: flex;
            justify-content: space-around;
        }
        .action-btn {
            color: #65676b;
            font-weight: 600;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            padding: 5px 20px;
            border-radius: 5px;
            transition: 0.2s;
        }
        .action-btn:active { background-color: #f2f2f2; transform: scale(0.95); }
        .liked { color: #e41e3f !important; }

        /* ESTILO ANUNCIO (Nativo) */
        .ad-card {
            background: white;
            margin-bottom: 12px;
            padding: 0;
            border: 2px solid #e7f3ff;
        }
        .ad-header {
            padding: 10px;
            font-size: 12px;
            color: #65676b;
            display: flex;
            justify-content: space-between;
        }
        .ad-content-box {
            background: #f0f8ff;
            height: 250px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            text-align: center;
            padding: 20px;
        }
        .cta-button {
            background: #1877f2;
            color: white;
            padding: 10px 20px;
            border-radius: 6px;
            margin-top: 15px;
            font-weight: bold;
            font-size: 14px;
            border: none;
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="logo">SocialApp</div>
        <div class="coins-badge">
            <span>üíé</span> <span id="coin-display">0</span>
        </div>
    </div>

    <div id="feed-container"></div>

    <script>
        // --- BASE DE DATOS DE POSTS (GENERADA POR IA) ---
        // Usamos Lorem Picsum para im√°genes autom√°ticas que funcionan siempre.
        const allPosts = [
            { user: "Sofia_Travels", time: "2 min", text: "¬°No puedo creer lo azul que es el agua aqu√≠! üåäüòç #Vacaciones #Relax", img: "https://picsum.photos/seed/travel1/600/400", avatar: "https://i.pravatar.cc/150?u=sofia" },
            { user: "Tech_Master", time: "5 min", text: "¬øVieron el nuevo lanzamiento de IA? Es una locura total ü§ñüíª #Tecnologia #Futuro", img: "https://picsum.photos/seed/tech1/600/400", avatar: "https://i.pravatar.cc/150?u=tech" },
            { user: "Gatitos_Oficial", time: "12 min", text: "Etiqueta a un amigo que necesite ver esto üò∫üòπ", img: "https://picsum.photos/seed/cat1/600/600", avatar: "https://i.pravatar.cc/150?u=cat" },
            { user: "Comida_Deli", time: "30 min", text: "Hoy toc√≥ hamburguesa doble con extra queso üçîüßÄ ¬øQui√©n quiere?", img: "https://picsum.photos/seed/burger/600/500", avatar: "https://i.pravatar.cc/150?u=food" },
            { user: "Mente_Millonaria", time: "1 h", text: "Trabaja mientras ellos duermen. üíºüíµ #Motivacion #Exito", img: "https://picsum.photos/seed/money/600/400", avatar: "https://i.pravatar.cc/150?u=rich" },
            { user: "Humor_Latino", time: "1 h", text: "Yo tratando de arreglar mi vida un lunes a las 8am üòÇ", img: "https://picsum.photos/seed/funny1/600/450", avatar: "https://i.pravatar.cc/150?u=humor" },
            { user: "Fitness_Daily", time: "2 h", text: "D√≠a de pierna completado. ¬°No pain no gain! üí™üèãÔ∏è‚Äç‚ôÇÔ∏è", img: "https://picsum.photos/seed/gym/600/500", avatar: "https://i.pravatar.cc/150?u=fit" },
            { user: "Curiosidades_X", time: "2 h", text: "¬øSab√≠as que los pulpos tienen 3 corazones? üêôü§Ø", img: "https://picsum.photos/seed/octopus/600/400", avatar: "https://i.pravatar.cc/150?u=nerd" },
            { user: "Arte_Visual", time: "3 h", text: "Mi √∫ltimo dibujo a l√°piz. ¬øQu√© opinan del 1 al 10? üé®‚úèÔ∏è", img: "https://picsum.photos/seed/art/600/600", avatar: "https://i.pravatar.cc/150?u=art" },
            { user: "Car_Lovers", time: "4 h", text: "Ese motor suena como m√∫sica para mis o√≠dos üèéÔ∏èüí®", img: "https://picsum.photos/seed/car/600/400", avatar: "https://i.pravatar.cc/150?u=car" },
            { user: "Memes_Random", time: "5 h", text: "Cuando te das cuenta que ma√±ana es lunes... ü§°", img: "https://picsum.photos/seed/sad/600/400", avatar: "https://i.pravatar.cc/150?u=meme" },
            { user: "Naturaleza_Viva", time: "6 h", text: "El atardecer de hoy fue simplemente m√°gico üåÖüß°", img: "https://picsum.photos/seed/sunset/600/400", avatar: "https://i.pravatar.cc/150?u=nature" },
            { user: "Gaming_Zone", time: "7 h", text: "¬°Por fin consegu√≠ el platino en este juego! üéÆüèÜ", img: "https://picsum.photos/seed/game/600/400", avatar: "https://i.pravatar.cc/150?u=gamer" },
            { user: "Cultura_Pop", time: "8 h", text: "¬øQui√©n m√°s est√° esperando la nueva temporada? üé¨üçø", img: "https://picsum.photos/seed/movie/600/400", avatar: "https://i.pravatar.cc/150?u=pop" },
            { user: "Crypto_Bro", time: "9 h", text: "El mercado est√° en verde hoy. ¬°Hold! üìàüöÄ", img: "https://picsum.photos/seed/chart/600/400", avatar: "https://i.pravatar.cc/150?u=btc" },
            { user: "Dog_Lover", time: "10 h", text: "El mejor amigo del hombre sin duda alguna üê∂‚ù§Ô∏è", img: "https://picsum.photos/seed/dog/600/500", avatar: "https://i.pravatar.cc/150?u=dog" },
            { user: "Espacio_Exterior", time: "11 h", text: "Una foto incre√≠ble de la nebulosa tomada por el telescopio Hubble üååüî≠", img: "https://picsum.photos/seed/space/600/400", avatar: "https://i.pravatar.cc/150?u=space" },
            { user: "Moda_Style", time: "12 h", text: "Outfit del d√≠a. ¬øLes gusta esta combinaci√≥n? üëóüë†", img: "https://picsum.photos/seed/fashion/600/800", avatar: "https://i.pravatar.cc/150?u=style" },
            { user: "Coffee_Time", time: "13 h", text: "Sin caf√© no hay para√≠so. Buenos d√≠as ‚òï‚òÄÔ∏è", img: "https://picsum.photos/seed/coffee/600/400", avatar: "https://i.pravatar.cc/150?u=coffee" },
            { user: "Frases_Sad", time: "14 h", text: "A veces es mejor soltar y dejar ir... üíîüåßÔ∏è", img: "https://picsum.photos/seed/rain/600/400", avatar: "https://i.pravatar.cc/150?u=sad" }
        ];

        // --- L√ìGICA DE LA APP ---
        let coins = 0;
        const feedContainer = document.getElementById('feed-container');
        const coinDisplay = document.getElementById('coin-display');
        
        // Configuraci√≥n de anuncios: 1 anuncio cada 4 posts
        const POSTS_PER_AD = 4;

        function renderFeed() {
            let counter = 0;

            // Barajar los posts para que cada vez que abras la app el orden sea distinto
            const shuffledPosts = allPosts.sort(() => Math.random() - 0.5);

            shuffledPosts.forEach((post) => {
                createPost(post);
                counter++;

                if (counter === POSTS_PER_AD) {
                    createAd();
                    counter = 0;
                }
            });
            
            // Un anuncio extra al final
            createAd();
        }

        function createPost(data) {
            const div = document.createElement('div');
            div.className = 'post-card';
            div.innerHTML = `
                <div class="post-header">
                    <img src="${data.avatar}" class="avatar" alt="user">
                    <div class="user-info">
                        <span class="username">${data.user}</span>
                        <span class="time">${data.time}</span>
                    </div>
                </div>
                <div class="post-caption">${data.text}</div>
                <img src="${data.img}" class="post-media" loading="lazy">
                <div class="post-actions">
                    <div class="action-btn" onclick="handleLike(this)">ü§ç Me gusta</div>
                    <div class="action-btn">üí¨ Comentar</div>
                    <div class="action-btn">‚Ü™Ô∏è Compartir</div>
                </div>
            `;
            feedContainer.appendChild(div);
        }

        function createAd() {
            const div = document.createElement('div');
            div.className = 'ad-card';
            // AQU√ç IR√çA EL SCRIPT REAL DE MONETAG
            div.innerHTML = `
                <div class="ad-header">
                    <span>Publicidad Sugerida</span>
                    <span>‚ÑπÔ∏è</span>
                </div>
                <div class="ad-content-box" onclick="watchAd()">
                    <div style="font-size:40px; margin-bottom:10px;">üéÅ</div>
                    <strong>Ver Video Patrocinado</strong>
                    <div style="font-size:12px; margin-top:5px; color:#555;">Gana +50 Diamantes Gratis</div>
                    <button class="cta-button">VER AHORA</button>
                </div>
            `;
            feedContainer.appendChild(div);
        }

        function handleLike(btn) {
            if (btn.classList.contains('liked')) return;
            
            btn.innerHTML = "‚ù§Ô∏è Me gusta";
            btn.classList.add('liked');
            
            // Feedback visual de ganancia peque√±a
            addCoins(5);
            
            // Simulaci√≥n: Probabilidad del 20% de que salga un anuncio Interstitial al dar like
            if(Math.random() < 0.2) {
                console.log("Aqu√≠ se lanzar√≠a el Interstitial de AdsGram");
            }
        }

        function watchAd() {
            // Aqu√≠ conectar√≠as con AdsGram / Monetag Video
            alert("Simulando Video Publicitario... (Espera 3 segundos)");
            setTimeout(() => {
                addCoins(50);
                alert("¬°Gracias por ver! +50 Diamantes a√±adidos.");
            }, 3000);
        }

        function addCoins(amount) {
            coins += amount;
            coinDisplay.innerText = coins;
            
            // Animaci√≥n simple del contador
            coinDisplay.style.transform = "scale(1.5)";
            setTimeout(() => coinDisplay.style.transform = "scale(1)", 200);
        }

        // Inicializar Telegram WebApp
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();
        
        // Renderizar Feed
        renderFeed();

    </script>
</body>
</html>
