<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Video Feed</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #000; /* Fondo negro tipo TikTok/Reels */
            color: white;
            margin: 0;
            padding-bottom: 70px;
        }

        /* HEADER */
        .header {
            background: rgba(0,0,0,0.9);
            padding: 10px 15px;
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #333;
        }
        .logo { font-weight: 800; color: #fff; font-size: 20px; }
        .coins-badge {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: #000;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 13px;
        }

        /* FEED */
        #feed-container { max-width: 500px; margin: 0 auto; }

        /* POST CARD TIPO VIDEO */
        .post-card {
            background: #111;
            margin-bottom: 20px;
            border-bottom: 1px solid #222;
            position: relative;
        }

        .post-header {
            padding: 10px;
            display: flex;
            align-items: center;
        }
        .avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            margin-right: 10px;
            border: 1px solid #555;
        }
        .username { font-weight: 600; font-size: 14px; color: #fff; }
        .time { font-size: 12px; color: #888; margin-left: 5px; }

        /* CONTENEDOR VISUAL (FOTO QUE PARECE VIDEO) */
        .media-container {
            position: relative;
            width: 100%;
            height: 400px; /* Altura vertical tipo Reel */
            background: #000;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .post-media {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.9;
        }

        /* UI DE VIDEO FALSO */
        .play-icon {
            position: absolute;
            font-size: 50px;
            color: rgba(255,255,255,0.8);
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
            pointer-events: none;
        }
        .video-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(255,255,255,0.2);
        }
        .video-progress {
            height: 100%;
            width: 40%;
            background: red;
        }

        .post-caption {
            padding: 12px;
            font-size: 14px;
            line-height: 1.4;
            color: #eee;
        }

        .post-actions {
            padding: 0 10px 15px 10px;
            display: flex;
            gap: 20px;
        }
        .action-icon { font-size: 22px; cursor: pointer; }

        /* ANUNCIO */
        .ad-card {
            background: #1a1a1a;
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #333;
            text-align: center;
        }
        .ad-box {
            background: #222;
            height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 8px;
            color: #aaa;
            cursor: pointer;
        }
        .btn-claim {
            margin-top: 10px;
            background: #007bff;
            border: none;
            color: white;
            padding: 8px 20px;
            border-radius: 5px;
            font-weight: bold;
        }

    </style>
</head>
<body>

    <div class="header">
        <div class="logo">ReelsGram</div>
        <div class="coins-badge">üí∞ <span id="coin-display">0</span></div>
    </div>

    <div id="feed-container"></div>

    <script>
        // --- CONFIGURACI√ìN ---
        let coins = 0;
        const coinDisplay = document.getElementById('coin-display');
        const feedContainer = document.getElementById('feed-container');

        // --- BASE DE DATOS MEJORADA (Contexto + Keywords) ---
        // 'keyword': Usamos esto para buscar la imagen exacta en internet cada vez.
        const postDatabase = [
            { user: "Gato_Viral", text: "¬°Miren lo que hace mi gato cuando tiene hambre! üê±üòπ", keyword: "cat,kitten" },
            { user: "Burger_King_Fan", text: "Esta hamburguesa doble queso es ilegal de lo rica que est√° üçîü§§", keyword: "burger,fastfood" },
            { user: "Futbol_Total", text: "El estadio est√° a reventar hoy para la final ‚öΩüèüÔ∏è", keyword: "soccer,stadium" },
            { user: "Travel_Life", text: "Atardecer en la playa, no pido nada m√°s üåä‚òÄÔ∏è", keyword: "beach,sunset" },
            { user: "Gamer_Pro", text: "Mi setup para jugar toda la noche. ¬øQu√© opinan? üéÆüïπÔ∏è", keyword: "gaming,pc" },
            { user: "Fitness_Gym", text: "D√≠a de pesas completado. ¬°A romper la dieta! üí™üèãÔ∏è", keyword: "gym,fitness" },
            { user: "Autos_Lujo", text: "Escuchen el motor de esta bestia italiana üèéÔ∏èüí®", keyword: "ferrari,supercar" },
            { user: "Pizza_Lover", text: "Pizza con extra pepperoni reci√©n salida del horno üçïüî•", keyword: "pizza" },
            { user: "Crypto_News", text: "El Bitcoin est√° subiendo otra vez, ¬°miren la gr√°fica! üìàüöÄ", keyword: "bitcoin,crypto" },
            { user: "Humor_Memes", text: "Cuando te das cuenta que ma√±ana es lunes... ü§°üòÇ", keyword: "clown,funny" },
            { user: "Doggy_Style", time: "5h", text: "Mi perro no me deja trabajar üòÇüê∂", keyword: "dog,puppy" },
            { user: "Tech_Review", time: "6h", text: "Probando el nuevo iPhone, la c√°mara es brutal üì±üì∏", keyword: "iphone,technology" }
        ];

        // --- GENERADOR DE IM√ÅGENES ALEATORIAS ---
        // Usamos LoremFlickr porque respeta las Keywords mejor que Picsum
        // Agregamos '?random=' para que SIEMPRE sea una foto nueva al recargar.
        function getImageUrl(keyword) {
            const randomID = Math.floor(Math.random() * 10000);
            return `https://loremflickr.com/500/600/${keyword}?random=${randomID}`;
        }

        function getAvatarUrl(index) {
            return `https://i.pravatar.cc/150?img=${index + 10}`;
        }

        // --- RENDERIZAR FEED ---
        function renderFeed() {
            // Barajar el orden de los posts para que no salgan siempre en la misma secuencia
            const shuffled = postDatabase.sort(() => Math.random() - 0.5);
            
            let adCounter = 0;

            shuffled.forEach((data, index) => {
                createPost(data, index);
                adCounter++;

                // Poner anuncio cada 3 posts
                if (adCounter === 3) {
                    createAd();
                    adCounter = 0;
                }
            });
            
            createAd(); // Uno al final
        }

        function createPost(data, index) {
            const div = document.createElement('div');
            div.className = 'post-card';
            
            // Generamos la URL fresca basada en la palabra clave
            const dynamicImage = getImageUrl(data.keyword);

            div.innerHTML = `
                <div class="post-header">
                    <img src="${getAvatarUrl(index)}" class="avatar">
                    <div>
                        <div class="username">${data.user}</div>
                        <div class="time">Hace un momento</div>
                    </div>
                </div>
                
                <div class="post-caption">${data.text}</div>

                <div class="media-container" onclick="playEffect(this)">
                    <img src="${dynamicImage}" class="post-media">
                    <div class="play-icon">‚ñ∂</div>
                    <div class="video-controls">
                        <div class="video-progress"></div>
                    </div>
                </div>

                <div class="post-actions">
                    <div class="action-icon" onclick="toggleLike(this)">ü§ç</div>
                    <div class="action-icon">üí¨</div>
                    <div class="action-icon">‚Ü™Ô∏è</div>
                </div>
            `;
            feedContainer.appendChild(div);
        }

        function createAd() {
            const div = document.createElement('div');
            div.className = 'ad-card';
            div.innerHTML = `
                <div style="font-size:10px; color:#666; margin-bottom:5px;">PUBLICIDAD SUGERIDA</div>
                <div class="ad-box" onclick="watchAd()">
                    <span style="font-size:40px;">üéÅ</span>
                    <p>Ver Video Reward</p>
                    <button class="btn-claim">GANAR +100 MONEDAS</button>
                </div>
            `;
            feedContainer.appendChild(div);
        }

        // --- INTERACCIONES ---

        function toggleLike(btn) {
            if (btn.innerText === "ü§ç") {
                btn.innerText = "‚ù§Ô∏è";
                btn.style.color = "red";
                addCoins(10); // Dar monedas por like
            } else {
                btn.innerText = "ü§ç";
                btn.style.color = "white";
            }
        }

        function playEffect(container) {
            // Simular que el video se pausa/reproduce
            const icon = container.querySelector('.play-icon');
            if (icon.style.display === 'none') {
                icon.style.display = 'block'; // Pausa
            } else {
                icon.style.display = 'none'; // Play
            }
        }

        function watchAd() {
            // Aqu√≠ ir√≠a tu c√≥digo de AdsGram / Monetag
            alert("Cargando anuncio de video... (Espera)");
            setTimeout(() => {
                addCoins(100);
                alert("¬°Recompensa recibida!");
            }, 1500);
        }

        function addCoins(amount) {
            coins += amount;
            coinDisplay.innerText = coins;
            coinDisplay.parentElement.style.transform = "scale(1.2)";
            setTimeout(() => coinDisplay.parentElement.style.transform = "scale(1)", 200);
        }

        // INICIAR
        renderFeed();
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();

    </script>
</body>
</html>
