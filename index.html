<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>IA Master Pro</title>
    
    <script src="https://sad.adsgram.ai/js/adsgram-sdk.js"></script>

    <style>
        :root { --primary: #0088cc; --bg: #f4f4f9; --card: #ffffff; }
        body { font-family: -apple-system, system-ui; margin: 0; padding: 15px; background: var(--bg); }
        .card { background: var(--card); padding: 20px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); max-width: 500px; margin: auto; }
        
        textarea { width: 100%; height: 90px; padding: 12px; border-radius: 12px; border: 1px solid #ddd; font-size: 16px; resize: none; box-sizing: border-box; outline: none; }
        #main-btn { width: 100%; padding: 15px; background: var(--primary); color: #fff; border: none; border-radius: 12px; font-size: 17px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        
        /* Contenedor del Anuncio */
        #ad-wrapper { 
            margin: 15px 0; 
            padding: 5px; 
            border: 1px dashed #bbb; 
            border-radius: 12px; 
            background: #fafafa; 
            min-height: 60px;
            display: block; /* Lo dejamos visible para que AdsGram lo cargue siempre */
        }
        
        #loader { display: none; text-align: center; margin: 20px 0; }
        img { width: 100%; border-radius: 15px; margin-top: 15px; display: none; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .tip { font-size: 11px; color: #888; text-align: center; margin-bottom: 10px; }
    </style>
</head>
<body>

<div class="card">
    <h2>ðŸŽ¨ Creador IA</h2>
    <p class="tip">ðŸ’¡ Explica detalladamente colores y formas para mejores resultados.</p>
    
    <textarea id="prompt" placeholder="Escribe tu idea aquÃ­..."></textarea>
    
    <button id="main-btn" onclick="generarConAd()">âœ¨ Generar Imagen</button>

    <div id="ad-wrapper">
        <span style="font-size: 9px; color: #ccc; display: block;">AD</span>
        <ins class="adsgram" data-block-id="18897"></ins>
    </div>

    <div id="loader">Generando tu imagen...</div>
    <img id="resultado" src="">
</div>

<script>
    function generarConAd() {
        // Esta funciÃ³n asegura que el anuncio se intente mostrar/refrescar
        // y luego ejecuta la creaciÃ³n de la imagen.
        
        // Si usas banners de AdsGram, ellos se cargan solos al mostrarse el bloque.
        ejecutarIA();
    }

    function ejecutarIA() {
        const text = document.getElementById('prompt').value;
        const img = document.getElementById('resultado');
        const loader = document.getElementById('loader');
        
        if(text.length < 5) return alert("Por favor, detalla mÃ¡s tu idea.");

        loader.style.display = "block";
        img.style.display = "none";

        const seed = Math.floor(Math.random() * 9999999);
        // Usamos el modelo Flux que es excelente para letras
        const url = `https://image.pollinations.ai/prompt/${encodeURIComponent(text)}?seed=${seed}&width=1024&height=1024&nologo=true&model=flux`;

        img.src = url;
        img.onload = () => {
            loader.style.display = "none";
            img.style.display = "block";
        };
    }
</script>

</body>
</html>
