<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Magic Post Creator âœ¨</title>
    
    <script src="https://sad.adsgram.ai/js/sad.min.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            margin: 0; padding: 20px;
            background: #f0f2f5; font-family: 'Poppins', sans-serif;
            display: flex; flex-direction: column; align-items: center;
        }
        .container { width: 100%; max-width: 400px; }
        
        h1 { font-size: 22px; color: #333; text-align: center; margin-bottom: 5px; }
        p { text-align: center; color: #666; font-size: 12px; margin-bottom: 20px; }

        textarea {
            width: 100%; height: 100px;
            border: 2px solid #ddd; border-radius: 15px;
            padding: 15px; font-family: inherit; font-size: 14px;
            box-sizing: border-box; outline: none; resize: none;
        }
        textarea:focus { border-color: #6c5ce7; }

        .btn-magic {
            background: linear-gradient(45deg, #6c5ce7, #a29bfe);
            color: white; border: none; padding: 15px;
            width: 100%; border-radius: 12px;
            font-weight: bold; font-size: 16px; cursor: pointer;
            margin-top: 15px; box-shadow: 0 4px 15px rgba(108, 92, 231, 0.3);
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .btn-magic:active { transform: scale(0.98); }

        /* RESULTADO */
        .result-box {
            background: white; padding: 20px;
            border-radius: 15px; margin-top: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            display: none; border: 1px solid #eee;
        }
        
        .preview {
            white-space: pre-wrap; /* Respeta saltos de lÃ­nea */
            font-size: 14px; color: #333; line-height: 1.6;
        }

        .actions { display: flex; gap: 10px; margin-top: 15px; }
        .btn-copy {
            flex: 1; background: #00b894; color: white;
            border: none; padding: 10px; border-radius: 8px; font-weight: bold; cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Magic Post Creator âœ¨</h1>
        <p>Convierte texto aburrido en un Post de Venta Viral con Emojis y Negritas.</p>

        <textarea id="inputText" placeholder="Escribe aquÃ­ tu texto aburrido...
Ej: Vendo zapatos talla 40 en valencia precio 20 dolares"></textarea>

        <button class="btn-magic" onclick="transformarTexto()">
            <span>âœ¨</span> MEJORAR CON IA
        </button>

        <div id="result-box" class="result-box">
            <div class="preview" id="outputText"></div>
            
            <div class="actions">
                <button class="btn-copy" onclick="copiar()">ðŸ“‹ COPIAR</button>
                <button class="btn-copy" style="background:#dfe6e9; color:#333" onclick="location.reload()">ðŸ”„ OTRO</button>
            </div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        const ADSGRAM_ID = "18897"; 

        function transformarTexto() {
            let texto = document.getElementById('inputText').value;
            if(!texto) return tg.showAlert("Escribe algo primero");

            // EL COBRO: ANTES DE MOSTRAR LA MAGIA ðŸ’°
            try {
                window.Adsgram.init({ blockId: ADSGRAM_ID }).show().then(() => {
                    aplicarMagia(texto);
                }).catch(() => {
                    aplicarMagia(texto);
                });
            } catch(e) {
                aplicarMagia(texto);
            }
        }

        function aplicarMagia(textoOriginal) {
            let lineas = textoOriginal.split('\n');
            let resultado = "";

            // 1. DICCIONARIO DE EMOJIS (LÃ³gica Simple)
            // Si encuentra estas palabras, pone estos emojis
            const emojis = {
                "precio": "ðŸ’°", "dolares": "ðŸ’µ", "oferta": "ðŸ”¥", "vendo": "ðŸ›ï¸",
                "envio": "ðŸšš", "gratis": "ðŸŽ", "info": "â„¹ï¸", "talla": "ðŸ‘Ÿ",
                "celular": "ðŸ“±", "nuevo": "âœ¨", "ubicacion": "ðŸ“", "caracas": "ðŸ‡»ðŸ‡ª",
                "venezuela": "ðŸ‡»ðŸ‡ª", "contacto": "ðŸ“ž", "dm": "ðŸ“©"
            };

            // 2. PROCESAR PRIMERA LÃNEA (TÃTULO)
            if(lineas.length > 0) {
                let titulo = lineas[0].toUpperCase();
                // Convertir a Negrita (MatemÃ¡tica Unicode)
                titulo = toBold(titulo);
                resultado += "ðŸ”¥ " + titulo + " ðŸ”¥\n\n";
            }

            // 3. PROCESAR EL CUERPO
            for(let i=1; i < lineas.length; i++) {
                let linea = lineas[i];
                if(linea.trim() === "") continue;

                // Buscar palabras clave para poner emojis
                let emojiEncontrado = "ðŸ‘‰"; // Emoji por defecto
                
                let palabras = linea.toLowerCase().split(' ');
                for(let p of palabras) {
                    if(emojis[p] || emojis[p.replace('s','')]) { // busca singular/plural simple
                        emojiEncontrado = emojis[p] || emojis[p.replace('s','')];
                        break;
                    }
                }
                
                resultado += `${emojiEncontrado} ${linea}\n`;
            }

            // 4. AGREGAR FINAL DE MARKETING
            resultado += "\nðŸ‘‡ **Â¡EscrÃ­beme al Privado!**\n";
            resultado += "#Ventas #Oportunidad #Viral";

            // MOSTRAR
            document.getElementById('outputText').innerText = resultado;
            document.getElementById('result-box').style.display = 'block';
            document.querySelector('.btn-magic').style.display = 'none';
        }

        // FUNCIÃ“N PARA CONVERTIR A NEGRITA (UNICODE)
        function toBold(text) {
            const normal = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
            const bold   = "ð—”ð—•ð—–ð——ð—˜ð—™ð—šð—›ð—œð—ð—žð—Ÿð— ð—¡ð—¢ð—£ð—¤ð—¥ð—¦ð—§ð—¨ð—©ð—ªð—«ð—¬ð—­ð—®ð—¯ð—°ð—±ð—²ð—³ð—´ð—µð—¶ð—·ð—¸ð—¹ð—ºð—»ð—¼ð—½ð—¾ð—¿ð˜€ð˜ð˜‚ð˜ƒð˜„ð˜…ð˜†ð˜‡ðŸ¬ðŸ­ðŸ®ðŸ¯ðŸ°ðŸ±ðŸ²ðŸ³ðŸ´ðŸµ";
            return text.split('').map(char => {
                let i = normal.indexOf(char);
                return i !== -1 ? bold.substr(i*2, 2) : char; // *2 porque bold usa 2 chars unicode
            }).join('');
        }

        function copiar() {
            let txt = document.getElementById('outputText').innerText;
            navigator.clipboard.writeText(txt);
            tg.showAlert("Â¡Copiado al portapapeles!");
        }
    </script>
</body>
</html>
