<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>IA Generativa - Telegram</title>
    <style>
        :root {
            --tg-theme-button-color: #0088cc;
            --tg-theme-button-text-color: #ffffff;
        }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            text-align: center; 
            margin: 0;
            padding: 20px; 
            background-color: #f4f4f9;
            color: #333;
        }
        h2 { font-size: 1.5rem; margin-bottom: 20px; }
        .container { max-width: 500px; margin: 0 auto; }
        
        input { 
            width: 100%; 
            padding: 15px; 
            margin-bottom: 15px; 
            border-radius: 12px; 
            border: 1px solid #ddd; 
            font-size: 16px;
            box-sizing: border-box;
        }
        
        button { 
            width: 100%; 
            padding: 15px; 
            background-color: var(--tg-theme-button-color); 
            color: var(--tg-theme-button-text-color); 
            border: none; 
            border-radius: 12px; 
            font-size: 18px; 
            font-weight: bold;
            cursor: pointer;
            transition: opacity 0.2s;
        }
        
        button:active { opacity: 0.8; }

        #resultado { margin-top: 25px; }
        
        img { 
            width: 100%; 
            border-radius: 15px; 
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            display: none; /* Se oculta hasta que cargue */
        }

        .loading { display: none; color: #666; font-style: italic; margin-top: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h2>üé® Creador de Im√°genes</h2>
    <input type="text" id="prompt" placeholder="Ej: Un astronauta en Marte...">
    <button onclick="generar()">Generar Imagen</button>
    
    <div id="loading" class="loading">Interpretando tu idea... üöÄ</div>
    <div id="resultado">
        <img id="ia-image" src="" alt="Imagen generada">
    </div>
</div>

<script>
    function generar() {
        const texto = document.getElementById('prompt').value;
        const imgElement = document.getElementById('ia-image');
        const loadingText = document.getElementById('loading');

        if(!texto) {
            alert("Por favor, escribe una descripci√≥n.");
            return;
        }

        // Mostramos cargando y ocultamos imagen anterior
        loadingText.style.display = "block";
        imgElement.style.display = "none";

        // Creamos una semilla aleatoria para evitar el bloqueo de "Rate Limit"
        const seed = Math.floor(Math.random() * 999999);
        
        // Construimos la URL
        const url = `https://image.pollinations.ai/prompt/${encodeURIComponent(texto)}?seed=${seed}&width=1024&height=1024&nologo=true&model=flux`;

        // Asignamos la URL a la imagen
        imgElement.src = url;

        // Cuando la imagen termina de descargarse del servidor de la IA
        imgElement.onload = function() {
            loadingText.style.display = "none";
            imgElement.style.display = "block";
        };

        // Si hay un error
        imgElement.onerror = function() {
            loadingText.innerHTML = "‚ùå Error al generar. Intenta con menos palabras.";
        };
    }
</script>

</body>
        </html>
